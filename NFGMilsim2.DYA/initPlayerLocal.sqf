///////////////////////////////////////////////////////////////////////////////
// NFG / 11th ABN Milsim Starter Files
///////////////////////////////////////////////////////////////////////////////
/* This is a custom initPlayerLocal.sqf file and is the basic file for some
	of the commonly used scrips and commands needed for mission templates.
*/

///////////////////////////////////////////////////////////////////////////////
// Fatigue/Stamina/Coefficient/Injured Settings
///////////////////////////////////////////////////////////////////////////////
player setCustomAimCoef 0.35;
player setUnitRecoilCoefficient 0.25;
player enableStamina false;
player enableFatigue false;
player addEventHandler ["HandleHeal", {
	_this spawn {
		params ["_injured","_healer"];
		_damage = damage _injured;
		waitUntil {damage _injured != _damage};
		if (damage _injured < _damage) then {
			_injured setDamage 0;
		};
	};
}];

///////////////////////////////////////////////////////////////////////////////
// GF Earplug Script
///////////////////////////////////////////////////////////////////////////////
[] execVM "GF_Earplugs\GF_Earplugs.sqf";

///////////////////////////////////////////////////////////////////////////////
// Custom Diary
///////////////////////////////////////////////////////////////////////////////
if ((!isServer) && (player != player)) then
{
  waitUntil {player == player};
};
_null = [] execVM "diary.sqf";	// diary tabs

///////////////////////////////////////////////////////////////////////////////
//ZLoadOut
///////////////////////////////////////////////////////////////////////////////
_unit = _this select 0;
[_unit,"Marker_RepairST",20] spawn zlo_fnc_CreateZone;//[player,markername,markerdistance]...
[_UNIT,"Marker_RepairHST",20] spawn zlo_fnc_CreateZone;

///////////////////////////////////////////////////////////////////////////////
//Save loadout when ever we exit an arsenal
///////////////////////////////////////////////////////////////////////////////
[ missionNamespace, "arsenalClosed", {
	systemChat "Loadout Saved";    //Not actually needed, can say anything you want
	waitUntil {time > 0.2};    //Time to wait to make sure Arsenal items are applied
	[player, [missionNamespace, "inventory_var"]] call BIS_fnc_saveInventory;
}] call BIS_fnc_addScriptedEventHandler;
